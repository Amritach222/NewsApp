{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import InfiniteScroll from'react-infinite-scroll-component';//* document.title=`NewsMonkey-${capitalizeFirstLetter(props.category)}`;\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalresults=_useState8[1];var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setProgress(10);// this.setState({loading:true})\nsetLoading(true);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);_context.next=5;return fetch(url);case 5:data=_context.sent;_context.next=8;return data.json();case 8:parsedData=_context.sent;props.setProgress(0);setArticles(parsedData.articles);setTotalresults(parsedData.totalResults);setLoading(false);props.setProgress(100);case 14:case\"end\":return _context.stop();}}},_callee);}));return function updateNews(){return _ref.apply(this,arguments);};}();useEffect(function(){document.title=\"NewsMonkey-\".concat(capitalizeFirstLetter(props.category));updateNews();// eslint-disable-next-line\n},[]);// eslint-disable-next-line\n// const componentDidMount= async()=>{// it is lifecycle method/ it runs after render() method\n//    updateNews();\n// }\n//     const handleNextClick= async ()=>{\n//         // eslint-disable-next-line\n//     setPage(page+1);\n//     updateNews()\n//     }\n//    const handlePreviousClick= async ()=>{\n//        // eslint-disable-next-line\n//         setPage(page-1);\n//          updateNews()\n//     }\nvar fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);setPage(page+1);_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:parsedData=_context2.sent;setArticles(articles.concat(parsedData.articles));setTotalresults(parsedData.totalResults);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{marginTop:'90px'},children:[\"NewsMonkey - Top Headlines from \",capitalizeFirstLetter(props.category)]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),\" \",/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),scrollableTarget:\"scrollableDiv\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:articles.map(function(elements){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:elements.title?elements.title.slice(0,45):\"\",description:elements.description?elements.description.slice(0,88):\"\",imageUrl:elements.urlToImage,newsUrl:elements.url,author:elements.author,date:elements.publishedAt,source:elements.source})},elements.url);})})})})]});};News.defaultProps={country:'in',pageSize:8,category:'general'};export default News;","map":{"version":3,"sources":["C:/Users/DELL/Documents/ReactCourse/newsapp/src/components/News.js"],"names":["React","useState","useEffect","NewsItem","Spinner","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalresults","capitalizeFirstLetter","string","charAt","toUpperCase","slice","updateNews","setProgress","url","country","category","apiKey","pageSize","fetch","data","json","parsedData","document","title","fetchMoreData","concat","marginTop","length","map","elements","description","urlToImage","author","publishedAt","source","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from 'react'\r\nimport NewsItem from './NewsItem'\r\nimport Spinner from './Spinner';\r\nimport PropTypes from 'prop-types'\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\n//* document.title=`NewsMonkey-${capitalizeFirstLetter(props.category)}`;\r\nconst News=(props)=> {\r\n    const [articles, setArticles] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [page, setPage] = useState(1)\r\n    const [totalResults, setTotalresults] = useState(0);\r\n\r\n   const capitalizeFirstLetter=(string)=>{\r\n        return string.charAt(0).toUpperCase()+string.slice(1);\r\n    }\r\n   \r\n    const  updateNews=async ()=>{\r\n        props.setProgress(10)\r\n        // this.setState({loading:true})\r\n        setLoading(true);\r\n        let url=`https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page}&pageSize=${props.pageSize}`;\r\n        let data= await fetch(url);// it' s a promise the method is wating for the rsponse either failure or success \r\n        let parsedData= await data.json();\r\n        props.setProgress(0);\r\n        setArticles(parsedData.articles);\r\n        setTotalresults(parsedData.totalResults);\r\n        setLoading(false);\r\n        props.setProgress(100);\r\n    }\r\n    useEffect(() => {\r\n        document.title=`NewsMonkey-${capitalizeFirstLetter(props.category)}`;\r\n        updateNews();\r\n        // eslint-disable-next-line\r\n    \r\n    }, []);\r\n    // eslint-disable-next-line\r\n    // const componentDidMount= async()=>{// it is lifecycle method/ it runs after render() method\r\n    //    updateNews();\r\n\r\n    // }\r\n//     const handleNextClick= async ()=>{\r\n//         // eslint-disable-next-line\r\n//     setPage(page+1);\r\n//     updateNews()\r\n//     }\r\n//    const handlePreviousClick= async ()=>{\r\n//        // eslint-disable-next-line\r\n//         setPage(page-1);\r\n//          updateNews()\r\n//     }\r\n    const fetchMoreData= async()=>{\r\n       \r\n        let url=`https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page+1}&pageSize=${props.pageSize}`;\r\n        setPage(page+1);\r\n        let data= await fetch(url);// it' s a promise the method is wating for the rsponse either failure or success \r\n        let parsedData= await data.json();\r\n        setArticles(articles.concat(parsedData.articles))\r\n        setTotalresults(parsedData.totalResults)\r\n\r\n    }\r\n        \r\n        return (\r\n            <>\r\n            <h1 className=\"text-center\" style={{marginTop:'90px'}}>NewsMonkey - Top Headlines from {capitalizeFirstLetter(props.category)}</h1>\r\n           {loading && <Spinner/> } {/* This state that if the loading is true then show spinner  */}\r\n           <InfiniteScroll\r\n           dataLength={articles.length}\r\n           next={fetchMoreData}\r\n           hasMore={articles.length!==totalResults}\r\n           loader={<Spinner/>}\r\n           scrollableTarget=\"scrollableDiv\"\r\n       >\r\n                <div className=\"container\">\r\n                <div className=\"row \">\r\n                {articles.map((elements)=>{\r\n                    return <div className=\"col-md-4\" key={elements.url}>\r\n                    <NewsItem title={elements.title?elements.title.slice(0,45):\"\"} description={elements.description?elements.description.slice(0,88):\"\"} \r\n                    imageUrl={elements.urlToImage} newsUrl={elements.url} author={elements.author} date={elements.publishedAt} source={elements.source}/>\r\n                </div>\r\n        \r\n                })}\r\n                </div>\r\n                </div>\r\n                </InfiniteScroll>\r\n                {/*<div className=\"container d-flex justify-content-between\" >\r\n                <button type=\"button\" disabled={this.state.page<=1} className=\"btn btn-dark \" onClick={this.handlePreviousClick}> &laquo; Previous</button>\r\n                <button type=\"button\" disabled={this.state.page+1> Math.ceil(this.state.totalResults/ props.pageSize)} className=\"btn btn-dark \" onClick={this.handleNextClick}>Next &raquo;</button>\r\n            </div>*/}\r\n            </>\r\n\r\n            \r\n        )\r\n    }\r\n    News.defaultProps={\r\n        country:'in',\r\n        pageSize:8,\r\n        category:'general'\r\n    }\r\n    News.propTypes={\r\n        country:PropTypes.string,\r\n        pageSize:PropTypes.number,\r\n        category:PropTypes.string\r\n    \r\n}\r\n\r\nexport default News\r\n"]},"metadata":{},"sourceType":"module"}