{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/DELL/Documents/ReactCourse/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import InfiniteScroll from'react-infinite-scroll-component';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(props){var _this;_classCallCheck(this,News);_this=_super.call(this,props);_this.handleNextClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({page:_this.state.page+1});_this.updateNews();case 2:case\"end\":return _context.stop();}}},_callee);}));_this.handlePreviousClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({page:_this.state.page+1});_this.updateNews();case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({page:_this.state.page+1});url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apiKey=7a62fb1796d84c898f39d25146f0ea69&page=\").concat(_this.state.page,\"&pageSize=\").concat(_this.props.pageSize);_context3.next=4;return fetch(url);case 4:data=_context3.sent;_context3.next=7;return data.json();case 7:parsedData=_context3.sent;_this.setState({articles:_this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults});case 9:case\"end\":return _context3.stop();}}},_callee3);}));_this.state={articles:[],loading:false,page:1,totalResults:0};document.title=\"NewsMonkey-\".concat(_this.capitalizeFirstLetter(_this.props.category));return _this;}_createClass(News,[{key:\"capitalizeFirstLetter\",value:function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}},{key:\"updateNews\",value:function(){var _updateNews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.props.setProgress(10);this.setState({loading:true});url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=7a62fb1796d84c898f39d25146f0ea69&page=\").concat(this.state.page,\"&pageSize=\").concat(this.props.pageSize);_context4.next=5;return fetch(url);case 5:data=_context4.sent;_context4.next=8;return data.json();case 8:parsedData=_context4.sent;this.props.setProgress(50);this.setState({articles:parsedData.articles,totalResults:parsedData.totalResults,loading:false});this.props.setProgress(100);case 12:case\"end\":return _context4.stop();}}},_callee4,this);}));function updateNews(){return _updateNews.apply(this,arguments);}return updateNews;}()},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// it is lifecycle method/ it runs after render() method\nthis.updateNews();case 1:case\"end\":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:'40px'},children:[\"NewsMonkey - Top Headlines from \",this.capitalizeFirstLetter(this.props.category)]}),this.state.loading&&/*#__PURE__*/_jsx(Spinner,{}),\" \",/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),scrollableTarget:\"scrollableDiv\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:this.state.articles.map(function(elements){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:elements.title?elements.title.slice(0,45):\"\",description:elements.description?elements.description.slice(0,88):\"\",imageUrl:elements.urlToImage,newsUrl:elements.url,author:elements.author,date:elements.publishedAt,source:elements.source})},elements.url);})})})})]});}}]);return News;}(Component);News.defaultProps={country:'in',pageSize:8,category:'general'};export default News;","map":{"version":3,"sources":["C:/Users/DELL/Documents/ReactCourse/newsapp/src/components/News.js"],"names":["React","Component","NewsItem","Spinner","InfiniteScroll","News","props","handleNextClick","setState","page","state","updateNews","handlePreviousClick","fetchMoreData","url","country","category","pageSize","fetch","data","json","parsedData","articles","concat","totalResults","loading","document","title","capitalizeFirstLetter","string","charAt","toUpperCase","slice","setProgress","margin","length","map","elements","description","urlToImage","author","publishedAt","source","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport NewsItem from './NewsItem'\r\nimport Spinner from './Spinner';\r\nimport PropTypes from 'prop-types'\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\n\r\nexport class News extends Component {\r\n    capitalizeFirstLetter(string){\r\n        return string.charAt(0).toUpperCase()+string.slice(1);\r\n    }\r\n   \r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            articles:[],\r\n            loading:false,\r\n            page:1,\r\n            totalResults:0\r\n        }\r\n        document.title=`NewsMonkey-${this.capitalizeFirstLetter(this.props.category)}`;\r\n    }\r\n    async updateNews(){\r\n        this.props.setProgress(10)\r\n        this.setState({loading:true})\r\n        let url=`https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=7a62fb1796d84c898f39d25146f0ea69&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n        let data= await fetch(url);// it' s a promise the method is wating for the rsponse either failure or success \r\n        let parsedData= await data.json();\r\n        this.props.setProgress(50)\r\n        this.setState({articles: parsedData.articles,\r\n            totalResults:parsedData.totalResults,\r\n            loading:false\r\n        })\r\n        this.props.setProgress(100)\r\n    }\r\n    async componentDidMount(){// it is lifecycle method/ it runs after render() method\r\n       this.updateNews();\r\n\r\n    }\r\n     handleNextClick= async ()=>{\r\n    \r\n    this.setState({page:this.state.page+1});\r\n    this.updateNews()\r\n    }\r\n    handlePreviousClick= async ()=>{\r\n        this.setState({page:this.state.page+1});\r\n         this.updateNews()\r\n    }\r\n    fetchMoreData= async()=>{\r\n        this.setState({page:this.state.page+1});\r\n        let url=`https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=7a62fb1796d84c898f39d25146f0ea69&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n        let data= await fetch(url);// it' s a promise the method is wating for the rsponse either failure or success \r\n        let parsedData= await data.json();\r\n        this.setState({articles: this.state.articles.concat(parsedData.articles),\r\n            totalResults:parsedData.totalResults,\r\n        })\r\n\r\n    }\r\n    render() {\r\n        \r\n        return (\r\n            <>\r\n            <h1 className=\"text-center\" style={{margin:'40px'}}>NewsMonkey - Top Headlines from {this.capitalizeFirstLetter(this.props.category)}</h1>\r\n           { this.state.loading && <Spinner/> } {/* This state that if the loading is true then show spinner  */}\r\n           <InfiniteScroll\r\n           dataLength={this.state.articles.length}\r\n           next={this.fetchMoreData}\r\n           hasMore={this.state.articles.length!==this.state.totalResults}\r\n           loader={<Spinner/>}\r\n           scrollableTarget=\"scrollableDiv\"\r\n       >\r\n                <div className=\"container\">\r\n                <div className=\"row \">\r\n                {this.state.articles.map((elements)=>{\r\n                    return <div className=\"col-md-4\" key={elements.url}>\r\n                    <NewsItem title={elements.title?elements.title.slice(0,45):\"\"} description={elements.description?elements.description.slice(0,88):\"\"} \r\n                    imageUrl={elements.urlToImage} newsUrl={elements.url} author={elements.author} date={elements.publishedAt} source={elements.source}/>\r\n                </div>\r\n        \r\n                })}\r\n                </div>\r\n                </div>\r\n                </InfiniteScroll>\r\n                {/*<div className=\"container d-flex justify-content-between\" >\r\n                <button type=\"button\" disabled={this.state.page<=1} className=\"btn btn-dark \" onClick={this.handlePreviousClick}> &laquo; Previous</button>\r\n                <button type=\"button\" disabled={this.state.page+1> Math.ceil(this.state.totalResults/ this.props.pageSize)} className=\"btn btn-dark \" onClick={this.handleNextClick}>Next &raquo;</button>\r\n            </div>*/}\r\n            </>\r\n\r\n            \r\n        )\r\n    }\r\n    static defaultProps={\r\n        country:'in',\r\n        pageSize:8,\r\n        category:'general'\r\n    }\r\n    static propTypes={\r\n        country:PropTypes.string,\r\n        pageSize:PropTypes.number,\r\n        category:PropTypes.string\r\n    }\r\n}\r\n\r\nexport default News\r\n"]},"metadata":{},"sourceType":"module"}